namespace = advancedtraits

event = {
    id = advancedtraits.1
    hide_window = yes
    is_triggered_only = yes

	trigger = {
		species = { has_trait = trait_immortal }
	}

    immediate = {
  #      every_country = {
   #         limit = {
	#			AND = {
	#				NOT = {has_country_flag = flag_trait_immortal}
	#				has_trait = trait_immortal
	#			}
     #       }

		every_owned_leader = {
			limit = {
				species = { has_trait = trait_immortal }
				NOR = {
					has_trait = leader_trait_immortal
				}
			}
			add_trait = leader_trait_immortal
			if = {
				limit = { leader_class = ruler }
				add_trait = leader_trait_immortal_ruler
			}
		}
		every_pool_leader = {
			limit = {
				species = { has_trait = trait_immortal }
				NOR = {
					has_trait = leader_trait_immortal
				}
			}
			add_trait = leader_trait_immortal
		}
		set_country_flag = flag_trait_immortal

        }
	}

event = {
    id = advancedtraits.2
    hide_window = yes
    is_triggered_only = yes
   
    immediate = {
        #every_country = {
         #   limit = {
			#	AND = {
			#		has_country_flag = flag_trait_immortal
			#		NOT = {has_trait = trait_immortal}
			#	}
        #    }
		every_owned_leader = {
			limit = {
				has_trait = leader_trait_immortal 
			}
			remove_trait = leader_trait_immortal
		}
		every_pool_leader = {
			limit = {
				has_trait = leader_trait_immortal 
			}
			remove_trait = leader_trait_immortal
		}
			remove_country_flag = flag_trait_immortal
        }
	}
