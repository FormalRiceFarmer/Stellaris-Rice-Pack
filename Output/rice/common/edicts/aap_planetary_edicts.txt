##########################################################################
# Planet edicts
##########################################################################

# Variables:
#  name, the name of the edict, also serves as localisation key.
#  influence_cost, the base influence cost of activating the edict.
#  potential, planet or country trigger to decide whether the edict should be shown.
#  allow, planet or country trigger to decide if whether this edict can be activated.
#  effect, an effect that is executed when this trigger activates.
#  prerequisites, tech requirements for this trigger.
#  ai_will_do, determines AI scoring for edict
#  modifier, a list of modifiers
#  length, number of days the trigger is active.

planet_edict = {
	name = "dust_build_corvette"
	influence_cost = 0
	
	potential = {
		owner = { has_ascension_perk = ap_custom_dust_of_endless }
	}
	
	length = 0
	
	allow = {
		custom_tooltip = {
			fail_text = edict_dust_build_fail_resource
			owner = {
				has_country_resource = { type = energy amount > 2999 }
				has_country_resource = { type = unity amount > 49 }
			}
		}
		custom_tooltip = {
			fail_text = edict_dust_build_fail_cooldown
			NOT = { has_planet_flag = edict_dust_build_cooldown }
		}
	}
	
	effect = {
		hidden_effect = {
			set_timed_planet_flag = { flag = edict_dust_build_cooldown days = 10 }
			owner = {
				add_energy = -3000
				add_unity = -50
				create_fleet = { name = "Recruited Fleet" }
				last_created_fleet = {
					set_owner = prev
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					create_ship = { name = random random_existing_design = "corvette" }
					set_location = root
				}
			}
		}
	}
	
	ai_weight = { weight = 5 }	
}

planet_edict = {
	name = "dust_build_destroyer"
	influence_cost = 0
	
	potential = {
		owner = { has_ascension_perk = ap_custom_dust_of_endless }
	}
	
	length = 0
	
	allow = {
		custom_tooltip = {
			fail_text = edict_dust_build_fail_resource
			owner = {
				has_country_resource = { type = energy amount > 2999 }
				has_country_resource = { type = unity amount > 49 }
			}
		}
		custom_tooltip = {
			fail_text = edict_dust_build_fail_cooldown
			NOT = { has_planet_flag = edict_dust_build_cooldown }
		}
		custom_tooltip = {
			fail_text = edict_dust_build_fail_tech_1
			owner = { has_technology = tech_spaceport_3 }
		}
	}
	
	effect = {
		hidden_effect = {
			set_timed_planet_flag = { flag = edict_dust_build_cooldown days = 10 }
			owner = {
				add_energy = -3000
				add_unity = -50
				create_fleet = { name = "Recruited Fleet" }
				last_created_fleet = {
					set_owner = prev
					create_ship = { name = random random_existing_design = "destroyer" }
					create_ship = { name = random random_existing_design = "destroyer" }
					create_ship = { name = random random_existing_design = "destroyer" }
					create_ship = { name = random random_existing_design = "destroyer" }
					create_ship = { name = random random_existing_design = "destroyer" }
					create_ship = { name = random random_existing_design = "destroyer" }
					create_ship = { name = random random_existing_design = "destroyer" }
					create_ship = { name = random random_existing_design = "destroyer" }
					set_location = root
				}
			}
		}
	}
	
	ai_weight = { weight = 5 }	
}

planet_edict = {
	name = "dust_build_cruiser"
	influence_cost = 0
	
	potential = {
		owner = { has_ascension_perk = ap_custom_dust_of_endless }
	}
	
	length = 0
	
	allow = {
		custom_tooltip = {
			fail_text = edict_dust_build_fail_resource
			owner = {
				has_country_resource = { type = energy amount > 2999 }
				has_country_resource = { type = unity amount > 49 }
			}
		}
		custom_tooltip = {
			fail_text = edict_dust_build_fail_cooldown
			NOT = { has_planet_flag = edict_dust_build_cooldown }
		}
		custom_tooltip = {
			fail_text = edict_dust_build_fail_tech_2
			owner = { has_technology = tech_spaceport_5 }
		}
	}
	
	effect = {
		hidden_effect = {
			set_timed_planet_flag = { flag = edict_dust_build_cooldown days = 10 }
			owner = {
				add_energy = -3000
				add_unity = -50
				create_fleet = { name = "Recruited Fleet" }
				last_created_fleet = {
					set_owner = prev
					create_ship = { name = random random_existing_design = "cruiser" }
					create_ship = { name = random random_existing_design = "cruiser" }
					create_ship = { name = random random_existing_design = "cruiser" }
					create_ship = { name = random random_existing_design = "cruiser" }
					set_location = root
				}
			}
		}
	}
	
	ai_weight = { weight = 5 }	
}

planet_edict = {
	name = "dust_build_battleship"
	influence_cost = 0
	
	potential = {
		owner = { has_ascension_perk = ap_custom_dust_of_endless }
	}
	
	length = 0
	
	allow = {
		custom_tooltip = {
			fail_text = edict_dust_build_fail_resource
			owner = {
				has_country_resource = { type = energy amount > 2999 }
				has_country_resource = { type = unity amount > 49 }
			}
		}
		custom_tooltip = {
			fail_text = edict_dust_build_fail_cooldown
			NOT = { has_planet_flag = edict_dust_build_cooldown }
		}
		custom_tooltip = {
			fail_text = edict_dust_build_fail_tech_3
			owner = { has_technology = tech_spaceport_6 }
		}
	}
	
	effect = {
		hidden_effect = {
			set_timed_planet_flag = { flag = edict_dust_build_cooldown days = 10 }
			owner = {
				add_energy = -3000
				add_unity = -50
				create_fleet = { name = "Recruited Fleet" }
				last_created_fleet = {
					set_owner = prev
					create_ship = { name = random random_existing_design = "battleship" }
					create_ship = { name = random random_existing_design = "battleship" }
					set_location = root
				}
			}
		}
	}
	
	ai_weight = { weight = 5 }	
}